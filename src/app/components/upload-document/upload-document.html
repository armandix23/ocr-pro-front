<div class="upload-section">
  <div class="upload-container">
    <div class="upload-header">
      <h2>Subir Documento</h2>
      <p>Arrastra un archivo aquí o haz clic para seleccionar</p>
    </div>

    <div class="upload-area" 
         [class.dragover]="dragOver"
         [class.has-file]="selectedFile"
         (dragover)="onDragOver($event)"
         (dragleave)="onDragLeave($event)"
         (drop)="onDrop($event)"
         (click)="fileInput.click()">
      
      <div class="upload-icon">
        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <polyline points="17,8 12,3 7,8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <line x1="12" y1="3" x2="12" y2="15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>

      <div class="upload-text">
        <h3 *ngIf="!selectedFile">Arrastra tu archivo aquí</h3>
        <h3 *ngIf="selectedFile">{{ selectedFile.name }}</h3>
        <p *ngIf="!selectedFile">o haz clic para seleccionar</p>
        <p *ngIf="selectedFile">Tamaño: {{ formatFileSize(selectedFile.size) }}</p>
      </div>

      <div class="upload-formats">
        <span class="format-tag">PDF</span>
        <span class="format-tag">JPG</span>
        <span class="format-tag">PNG</span>
      </div>

      <input #fileInput 
             type="file" 
             accept=".pdf,.jpg,.jpeg,.png"
             (change)="onFileSelected($event)"
             style="display: none;">
    </div>

    <!-- Progress Bar -->
    <div *ngIf="uploading" class="upload-progress">
      <div class="progress-bar">
        <div class="progress-fill" [style.width.%]="uploadProgress"></div>
      </div>
      <p class="progress-text">Subiendo archivo... {{ uploadProgress }}%</p>
    </div>

    <!-- Upload Button -->
    <div class="upload-actions">
      <button 
        class="upload-btn"
        [class.loading]="uploading"
        [disabled]="!selectedFile || uploading"
        (click)="uploadFile()">
        <span *ngIf="!uploading" class="btn-content">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <polyline points="17,8 12,3 7,8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <line x1="12" y1="3" x2="12" y2="15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Subir Archivo
        </span>
        <span *ngIf="uploading" class="btn-content">
          <div class="spinner"></div>
          Procesando...
        </span>
      </button>

      <button 
        class="example-btn"
        (click)="loadExampleData()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M1 12S5 4 12 4S23 12 23 12S19 20 12 20S1 12 1 12Z" stroke="currentColor" stroke-width="2"/>
          <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
        </svg>
        Ver Datos de Ejemplo
      </button>
    </div>
  </div>
</div>